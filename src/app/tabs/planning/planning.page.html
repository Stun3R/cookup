<ion-header mode="ios">
  <ion-toolbar>
    <ion-title
      class="planning__toolbar-title"
      style="
        padding-bottom: 6px;
        padding-left: unset;
        padding-right: unset;
        -webkit-padding-start: 16px;
        padding-inline-start: 16px;
        -webkit-padding-end: 16px;
        padding-inline-end: 16px;
        text-align: left;
        font-weight: 700;
      "
    >
      Planning
    </ion-title>
  </ion-toolbar>
  <ion-toolbar>
    <section class="planning__calendar">
      <div
        class="planning__date"
        [class.planning__date-select]="isSame(day)"
        (click)="selectDate(day)"
        *ngFor="let day of days"
      >
        <span class="planning__date-day">{{ day | date:'EEEEE'Â }}</span>
        <span class="planning__date-nb">{{ day | date:'dd' }}</span>
      </div>
    </section>
  </ion-toolbar>
</ion-header>

<ion-content class="planning__content">
  <ion-list>
    <ion-item-group *ngFor="let meal of meals">
      <ion-item-divider sticky="true">
        <ion-label>{{ types[meal?.type] }}</ion-label>
      </ion-item-divider>

      <ng-container *ngIf="meal?.recipes?.length > 0">
        <ion-item
          detail="true"
          *ngFor="let recipe of meal?.recipes"
          [routerLink]="['/private/planning/recipes/' + recipe?.id]"
        >
          <ion-icon
            slot="start"
            [src]="'/assets/icon/recipe-categories/' + recipe?.category + '.svg'"
          ></ion-icon>
          <ion-label>
            <h2>{{ recipe?.name }}</h2>
            <p class="planning__list-infos">
              <ion-icon
                class="planning__list-icon"
                name="hourglass-outline"
              ></ion-icon>
              {{ recipe?.preparation | dayjsRecipe:
              "HH:mm:ss.SSS":recipe?.cooking }}
            </p>
          </ion-label>
        </ion-item>
      </ng-container>

      <ng-container *ngIf="meal?.aliments?.length > 0">
        <ion-item
          *ngFor="let aliment of meal?.aliments"
          [routerLink]="['/private/planning/aliments/' + aliment?.id]"
        >
          <ion-icon
            slot="start"
            [src]="'assets/icon/food-categories/' + aliment?.food?.food_category?.icon"
          >
          </ion-icon>
          <ion-label>
            <h2 class="planning__list-content planning__list-mb">
              {{ aliment?.food?.name }}
              <ion-badge slot="end" color="secondary">
                {{ aliment?.quantity + aliment?.food?.unit }}
              </ion-badge>
            </h2>
            <p class="planning__list-content planning__list-text">
              <span
                [innerHTML]="aliment?.food?.expire_at | dayjsExpire"
                style="font-weight: 600;"
              ></span>
              <ion-text color="medium">
                {{ places[aliment?.food?.place] }}
              </ion-text>
            </p>
          </ion-label>
        </ion-item>
      </ng-container>
    </ion-item-group>
  </ion-list>
</ion-content>
